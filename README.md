# 🎥 TwitRec - Twitch Stream Recorder

<div align="center">

```
╔════════════════════════════════════════════╗
║         ████████╗██╗    ██╗██╗████████╗   ║
║         ╚══██╔══╝██║    ██║██║╚══██╔══╝   ║
║            ██║   ██║ █╗ ██║██║   ██║      ║
║            ██║   ██║███╗██║██║   ██║      ║
║            ██║   ╚███╔███╔╝██║   ██║      ║
║            ╚═╝    ╚══╝╚══╝ ╚═╝   ╚═╝      ║
║            ██████╗ ███████╗ ██████╗       ║
║            ██╔══██╗██╔════╝██╔════╝       ║
║            ██████╔╝█████╗  ██║            ║
║            ██╔══██╗██╔══╝  ██║            ║
║            ██║  ██║███████╗╚██████╗       ║
║            ╚═╝  ╚═╝╚══════╝ ╚═════╝       ║
╚════════════════════════════════════════════╝
```

**Мощный и красивый CLI инструмент для автоматической записи Twitch стримов**

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

</div>

---

## ✨ Особенности

- 🎯 **Простой и красивый CLI интерфейс** - создан с использованием библиотеки Rich
- 🔴 **Автоматическая запись стримов** - настройте и забудьте
- 🎬 **Выбор качества** - от 160p до 1080p60 и выше
- 🌙 **Фоновый режим** - автоматическое отслеживание и запись стримов
- 📊 **Мониторинг в реальном времени** - следите за активными записями
- 🔍 **Поиск каналов** - быстрый поиск стримеров через Twitch API
- ⚙️ **Гибкая настройка** - настройте все под себя
- 📝 **Подробное логирование** - полная история всех операций

## 📋 Требования

- Python 3.8 или выше
- [Streamlink](https://streamlink.github.io/) - для записи стримов
- Twitch API ключи (Client ID и Client Secret)

## 🚀 Установка

### 1. Клонирование репозитория

```bash
git clone https://github.com/yourusername/TwitRec.git
cd TwitRec
```

### 2. Установка зависимостей Python

```bash
pip install -r requirements.txt
```

### 3. Установка Streamlink

#### Windows:
```bash
pip install streamlink
```

#### Linux (Ubuntu/Debian):
```bash
sudo apt update
sudo apt install streamlink
```

#### macOS:
```bash
brew install streamlink
```

### 4. Получение Twitch API ключей

1. Перейдите на [Twitch Developer Console](https://dev.twitch.tv/console/apps)
2. Войдите в свой аккаунт Twitch
3. Нажмите "Register Your Application"
4. Заполните форму:
   - **Name**: TwitRec (или любое другое имя)
   - **OAuth Redirect URLs**: `http://localhost`
   - **Category**: Application Integration
5. Нажмите "Create"
6. Скопируйте **Client ID**
7. Нажмите "New Secret" и скопируйте **Client Secret**

## 🎮 Использование

### Запуск приложения

```bash
python main.py
```

При первом запуске вам будет предложено ввести ваши Twitch API ключи.

### Основные функции

#### 1️⃣ Начать запись стрима

- Введите имя стримера
- Выберите качество записи
- Запись начнется автоматически, если стрим онлайн

#### 2️⃣ Остановить запись

- Просмотрите список активных записей
- Выберите стримера для остановки записи

#### 3️⃣ Показать активные записи

- Просмотр всех текущих записей
- Информация о времени записи и размере файла

#### 4️⃣ Поиск каналов

- Поиск стримеров по имени или игре
- Просмотр статуса (онлайн/оффлайн)

#### 5️⃣ Информация о канале

- Подробная информация о стримере
- Текущий статус стрима
- Количество зрителей

#### 6️⃣ Настройки

Настройте приложение под себя:
- 📁 Директория для сохранения записей
- 🎬 Качество записи по умолчанию
- ⏱️ Интервал проверки стримов
- 📝 Шаблон имени файлов
- 🔑 Обновление API ключей

#### 7️⃣ Фоновый режим

**Самая мощная функция TwitRec!**

1. Добавьте стримеров в список отслеживания
2. Запустите фоновый режим
3. Приложение будет автоматически:
   - Проверять статус стримеров
   - Начинать запись при появлении онлайн
   - Останавливать запись когда стрим завершается

```bash
# Фоновый режим будет работать пока вы не нажмете Ctrl+C
```

## 📁 Структура проекта

```
TwitRec/
├── main.py                      # Главный файл приложения
├── requirements.txt             # Зависимости Python
├── README.md                    # Документация
├── twitrec/                     # Основной пакет
│   ├── __init__.py
│   ├── api/                     # API модули
│   │   ├── __init__.py
│   │   └── twitch_client.py    # Клиент Twitch API
│   ├── recorder/                # Модули записи
│   │   ├── __init__.py
│   │   └── stream_recorder.py  # Запись стримов
│   ├── ui/                      # Интерфейс
│   │   ├── __init__.py
│   │   └── cli_interface.py    # CLI интерфейс с Rich
│   └── utils/                   # Утилиты
│       ├── __init__.py
│       └── config.py            # Конфигурация
├── recordings/                  # Записанные стримы
└── logs/                        # Логи приложения
```

## ⚙️ Конфигурация

Конфигурационные файлы хранятся в `~/.twitrec/`:

- `config.json` - основные настройки
- `.env` - API ключи
- `watched.json` - список отслеживаемых стримеров

### Шаблоны имен файлов

Доступные переменные:
- `{streamer}` - имя стримера
- `{date}` - дата в формате YYYY-MM-DD
- `{time}` - время в формате HH-MM-SS
- `{timestamp}` - Unix timestamp

Пример: `{streamer}_{date}_{time}.mp4`
Результат: `ninja_2024-01-15_18-30-00.mp4`

## 🎬 Доступные качества

- `best` - лучшее доступное качество
- `1080p60` - 1080p 60fps
- `1080p` - 1080p 30fps
- `720p60` - 720p 60fps
- `720p` - 720p 30fps
- `480p` - 480p
- `360p` - 360p
- `160p` - 160p
- `worst` - худшее качество
- `audio_only` - только аудио

## 🐛 Решение проблем

### Streamlink не найден

```bash
# Проверьте установку
streamlink --version

# Переустановите если необходимо
pip install --upgrade streamlink
```

### Ошибки API

- Убедитесь что Client ID и Client Secret верны
- Проверьте подключение к интернету
- Попробуйте обновить ключи в настройках

### Проблемы с записью

- Проверьте что у вас достаточно места на диске
- Убедитесь что streamlink установлен правильно
- Проверьте логи в директории `logs/`

## 📊 Логи

Все операции логируются в директории `logs/`:
- Основной лог: `twitrec_YYYYMMDD.log`
- Логи записи: `streamer_YYYYMMDD_HHMMSS.log`

## 🤝 Вклад в проект

Contributions are welcome! Feel free to:
- 🐛 Сообщать о багах
- 💡 Предлагать новые функции
- 🔧 Отправлять Pull Requests

## 📝 Лицензия

Этот проект распространяется под лицензией MIT. См. файл `LICENSE` для деталей.

## 🌟 Автор

Создано с ❤️ для сообщества Twitch

## 📞 Поддержка

Если у вас есть вопросы или проблемы:
1. Проверьте раздел "Решение проблем"
2. Посмотрите логи приложения
3. Создайте Issue на GitHub

---

<div align="center">

**Наслаждайтесь записью ваших любимых стримов! 🎮📹**

</div>
